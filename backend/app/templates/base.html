<!DOCTYPE html>
<html lang="{{ g.locale if g.locale else 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}WaveBulk{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    {% block head_extra %}{% endblock %} 
</head>
<body>
    <header class="main-header">
        <div class="container">
            <a href="{{ url_for('main.index') }}" class="logo" style="text-decoration: none;">WaveBulk</a>
            <nav class="main-nav">
                <ul>
                    <li><a href="{{ url_for('main.index') }}">{{ _('Home') }}</a></li>
                    <li><a href="{{ url_for('main.pricing') }}">{{ _('Cennik') }}</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <div class="language-switcher">
                    <a href="{{ url_for('main.set_language', lang='en') }}" class="lang-link {% if g.locale == 'en' %}active{% endif %}">EN</a>
                    <span style="color: var(--border-color);">|</span>
                    <a href="{{ url_for('main.set_language', lang='pl') }}" class="lang-link {% if g.locale == 'pl' %}active{% endif %}">PL</a>
                </div>
                <a href="{{ url_for('auth.login') }}" class="btn btn-secondary">{{ _('Zaloguj się') }}</a>
                <a href="{{ url_for('auth.register') }}" class="btn btn-primary">{{ _('Zarejestruj się') }}</a>
            </div>
        </div>
    </header>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages-container">
                {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    {% block content %}{% endblock %}
    
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; {{ current_year or '2025' }} WaveBulk. {{ _('Wszelkie prawa zastrzeżone.') }}</p>
                <div class="footer-links">
                    <a href="{{ url_for('main.terms') }}">{{ _('Regulamin') }}</a>
                    <span>•</span>
                    <a href="{{ url_for('main.privacy') }}">{{ _('Polityka Prywatności') }}</a>
                    <span>•</span>
                    <a href="{{ url_for('main.help') }}">{{ _('Pomoc') }}</a>
                    <span>•</span>
                    <a href="mailto:support@wavebulk.com">{{ _('Kontakt') }}</a>
                </div>
            </div>
        </div>
    </footer>
    
    <script src="https://unpkg.com/wavesurfer.js@7"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/timeline.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/spectrogram.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/regions.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/minimap.min.js"></script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
